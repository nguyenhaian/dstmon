<div class="row panel-body">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Target: <b>{{target.selectedApp}}</b>
                <a href ng-click="getGP()">
                    <i ng-class="inloading ? 'fa fa-refresh fa-spin fa-fw' :'fa fa-refresh fa-fw'"></i> load from db</a>
                <!-- or
                <a href ng-click="uploadPendingMessage()">
                    <i class="fa fa-upload" aria-hidden="true"></i> upload .csv</a> -->
                <div class="pull-right">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                            {{target.selectedApp}}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu pull-right" role="menu">
                            <!-- <li ng-repeat-start="group in target.groups"><a href ng-click="target.selectedGroup = $index; target.selectedApp = -1"><b>{{group.groupname}}</b></a></li> -->
                            <li ng-repeat="app in target.apps"><a href ng-click="target.selectedApp = app">{{app}}</a></li>
                            <!-- <li ng-repeat-end role="separator" class="divider"></li> -->
                        </ul>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <div>Valid</div>
                <table style="table-layout:fixed;">
                    <tr ng-repeat="noti in data.valid">
                        <td>{{$index+1}}</td>
                        <td>
                            <canvas id="canvas_{{noti._id}}" width="{{468+20}}" height="{{300+20}}" style="border:0px solid #d3d3d3;">
                                Your browser does not support the HTML5 canvas tag.
                            </canvas>
                            {{preview(noti, $index)}}
                        </td>
                        <td><a href ng-click="">edit</a></td>
                        <td><a href ng-click="">delete</a></td>
                    </tr>
                </table>
                <div>Valid In Future</div>
                <table style="table-layout:fixed;">
                    <tr ng-repeat="noti in data.valid_in_future">
                        <td>{{$index+1}}</td>
                        <td>
                            <canvas id="canvas_{{noti._id}}" width="{{468+20}}" height="{{300+20}}" style="border:0px solid #d3d3d3;">
                                Your browser does not support the HTML5 canvas tag.
                            </canvas>
                            {{preview(noti, $index)}}
                        </td>
                        <td><a href ng-click="">edit</a></td>
                        <td><a href ng-click="">delete</a></td>
                    </tr>
                </table>
                <div>Invalid</div>
                <table>
                    <tr class='row' ng-repeat="noti in data.invalid">
                        <td width="5">{{$index+1}}
                        </td>
                        <td width="490">
                            <canvas id="canvas_{{noti._id}}" width="{{468+20}}" height="{{300+20}}" style="border:0px solid #d3d3d3;">
                                Your browser does not support the HTML5 canvas tag.
                            </canvas>
                            {{preview(noti, $index)}}
                        </td>
                        <td>
                            <!-- <pre contenteditable="true" style="overflow: auto;">{{pretty(noti)}}</pre> -->
                            <textarea id="ta_{{noti._id}}" rows="4" cols="50" height="100%" width="100%">{{getjson(noti)}}</textarea>
                            <div class="gbutton">
                                <button class="b1" ng-click="applyright(noti)">>>></button>
                                <button class="b2" ng-click="applyleft(noti)">
                                    <<<</button>
                                        <a href ng-click="">edit</a>
                                        <a href ng-click="">delete</a>
                            </div>
                            {{initCodeMirror(noti, $index)}}
                        </td>
                    </tr>
                </table>
                <br>
                <button type="button" class="btn btn-danger pull-right" ng-click="">Add</button>
            </div>
        </div>
        <!--
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Last sent messages (top last {{sentnotifications.length}} mgs)
                <a href ng-click="loadLastSentMsg()">
                    <i ng-class="viewangle.loading ? 'fa fa-refresh fa-spin fa-fw' :'fa fa-refresh fa-fw'"></i> refresh from db</a>
            </div>
            <div class="panel-body">
                <table>
                    <tr>
                        <th>id</th>
                        <th>userid </th>
                        <th>username</th>
                        <th>message</th>
                        <th>send_after</th>
                        <th>error</th>
                        <th>onesignalid</th>
                        <th>cpmid</th>
                        <th>reipts</th>
                        <th>target</th>
                    </tr>
                    <tr ng-repeat="noti in sentnotifications| limitTo:200">
                        <td>{{ noti.id }}</td>
                        <td>{{ noti.userid }}</td>
                        <td>{{ noti.username }}</td>
                        <td>{{ noti.message }}</td>
                        <td>{{ noti.send_after }}</td>
                        <td>{{ noti.error }}</td>
                        <td><a target="_blank" href="/messagedetail/{{ noti.target }}/{{noti.onesignalid}}">{{ target.getmsgdetail(noti.onesignalid) }}</a></td>
                        <td>{{ noti.campaignid }}</td>
                        <td>{{ noti.recipients }}</td>
                        <td>{{ target.getappname(noti.target) }}</td>
                    </tr>
                </table>
            </div>
        </div>
        -->
    </div>
</div>
