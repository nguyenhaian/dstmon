<div class="row panel-body">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Target: <b>{{target.selectedApp}}</b>
                <i ng-class="inloading ? 'fa fa-refresh fa-spin fa-fw' :'fa fa-refresh fa-fw'"></i>
                <!-- or
                <a href ng-click="uploadPendingMessage()">
                    <i class="fa fa-upload" aria-hidden="true"></i> upload .csv</a> -->
                <div class="pull-right">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                            {{target.selectedApp}}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu pull-right" role="menu">
                            <!-- <li ng-repeat-start="group in target.groups"><a href ng-click="target.selectedGroup = $index; target.selectedApp = -1"><b>{{group.groupname}}</b></a></li> -->
                            <li ng-repeat="app in target.apps"><a href ng-click="setSelectedApp(app)">{{app}}</a></li>
                            <!-- <li ng-repeat-end role="separator" class="divider"></li> -->
                        </ul>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <table class="tbbanner">
                    <tr class='row'>
                        <th>index</th>
                        <th>rule</th>
                        <th>rule number</th>
                        <th>limit</th>
                        <th>description</th>
                        <th>date created</th>
                        <th>action</th>
                    </tr>
                    <tr class='row' ng-repeat="rule in rules">
                        <td>{{$index+1}} </td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" ng-model="rule.rule">{{rule.rule}}
                                    <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li><a ng-click="rule.rule='day'">day</a></li>
                                    <li><a ng-click="rule.rule='lifetime'">lifetime</a></li>
                                    <li><a ng-click="rule.rule='session'">session</a></li>
                                </ul>
                            </div>
                        </td>
                        <td> {{rule.ruleNumber}} </td>
                        <td>
                            <input type="text" class="form-control" placeholder="1" ng-model="rule.limit">
                        </td>
                        <td>
                            <input type="text" class="form-control" placeholder="description" ng-model="rule.description">
                        </td>
                        <td>{{formatDate(rule.date)}} </td>
                        <td>
                            <button type="button" class="btn btn-success" ng-click="saveRule(rule)"><i class="fa fa-floppy-o" aria-hidden="true"></i></button>
                            <button type="button" class="btn btn-warning" ng-click="reloadRule(rule, $index)"><i class="fa fa-refresh" aria-hidden="true"></i></button>
                            <button type="button" class="btn btn-danger" ng-click="deleteRule(rule, $index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
                        </td>
                    </tr>
                    <tr>
                        <button type="button" class="btn btn-danger pull-right" ng-click="createRule()">Add</button>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
